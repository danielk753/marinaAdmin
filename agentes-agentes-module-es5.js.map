{"version":3,"sources":["src/app/pages/agentes/agentes.component.html","src/app/pages/agentes/agentes.component.scss","src/app/pages/agentes/agentes.component.ts","src/app/pages/agentes/agentes.module.ts","src/app/services/agentes.service.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<nb-alert status=\\\"success\\\" *ngIf=\\\"messageSuccess\\\" closable (close)=\\\"messageSuccess=''\\\">\\n    {{messageSuccess}}\\n</nb-alert>\\n\\n<nb-alert status=\\\"danger\\\" *ngFor=\\\"let errorsInput of errorsPerInput; let i = index\\\" closable\\n    (close)=\\\"errorsPerInput.splice(i,1)\\\">\\n    <div *ngFor=\\\"let error of errorsInput\\\">\\n        - {{error}}\\n    </div>\\n</nb-alert>\\n\\n<nb-card>\\n    <nb-card-header >PROVEEDORES</nb-card-header>\\n\\n    <nb-card-body>\\n\\n        <app-data-table [dataArrayInput]=\\\"agentes |async\\\" [tableStructure]=\\\"tableStructure\\\" #dataTable (create)=\\\"create($event,dataTable)\\\" (update)=\\\"update($event,dataTable)\\\" (delete)=\\\"delete($event,dataTable)\\\"></app-data-table>\\n    </nb-card-body>\\n\\n</nb-card>\\n\\n\"","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2FnZW50ZXMvYWdlbnRlcy5jb21wb25lbnQuc2NzcyJ9 */\"","import { Component, OnInit } from '@angular/core';\nimport { Agente } from 'src/app/models/agente';\nimport { AgentesService } from 'src/app/services/agentes.service';\nimport { TableStructure } from 'src/app/own/data-table/tableStructure';\nimport { Observable } from 'rxjs';\nimport { DialogComponent } from '../../own/dialog/dialog.component';\nimport { NbDialogService } from '@nebular/theme';\n\n@Component({\n  selector: 'app-agentes',\n  templateUrl: './agentes.component.html',\n  styleUrls: ['./agentes.component.scss']\n})\nexport class AgentesComponent implements OnInit {\n\n  public tableStructure: TableStructure = {\n    columns: [{ title: \"ID\", name: \"id\", editable: false, type: \"number\", filter: false },\n    { title: \"Nombre\", name: \"nombre\", editable: true, type: \"text\", filter: true },\n    { title: \"Teléfono\", name: \"telefono\", editable: true, type: \"number\", filter: true },\n    { title: \"Correo\", name: \"correo\", editable: true, type: \"text\", filter: true },\n    { title: \"Dirección\", name: \"direccion\", editable: true, type: \"textarea\", filter: true },],\n    buttons: {\n      create: true,\n      delete: true,\n      update: true\n    }\n  };\n  public agentes: Observable<Agente[]>;\n  public errorsPerInput = [];\n  public messageSuccess = \"\";\n\n\n  constructor(private agenteService: AgentesService, private dialogService: NbDialogService) { }\n\n  ngOnInit() {\n    this.agentes = this.agenteService.getAgentes();\n  }\n\n  public create(newData, dataTable) {\n    this.reset();\n        dataTable.charginData++;\n    this.agenteService.createAgente(newData)\n      .subscribe(agenteResponse => {\n        dataTable.charginData--;\n        this.messageSuccess = \"Proveedor creado exitosamente\";\n        dataTable.pushData(agenteResponse)\n      }, error => this.displayErrors(error));\n  }\n\n  public update(updateData, dataTable) {\n    this.reset();\n        dataTable.charginData++;\n    this.agenteService.updateAgente(updateData)\n      .subscribe(agenResponse => {\n        dataTable.charginData--;\n        dataTable.updateData(agenResponse);\n        this.messageSuccess = \"Proveedor actualizado correctamente\";\n      }, error => this.displayErrors(error));\n  }\n\n  public delete(deleteData, dataTable) {\n    this.dialogService.open(DialogComponent, {\n      context: {\n        title: '¡Cuidado!',\n        content: `Si elimina este registro, se perderá el historial de movimientos relacionados al registro de ${deleteData.nombre.toUpperCase()}. ¿Desea continuar?`\n      },\n    }).onClose.subscribe(response => {\n      if (response) {\n        this.reset();\n        dataTable.charginData++;\n        this.agenteService.deleteAgente(deleteData).subscribe(response => {\n          dataTable.charginData--;\n          this.messageSuccess = \"Proveedor eliminado correctamente\"\n          dataTable.deleteData(response);\n        },error=>this.displayErrors(error));\n      }\n    });\n\n  }\n  private reset() {\n    this.errorsPerInput = [];\n    this.messageSuccess = \"\";\n\n    \n    setTimeout(() => {\n      this.errorsPerInput = [];\n      this.messageSuccess = \"\";\n\n    }, 10000);\n  }\n  private displayErrors(error){\n    for (const key in error.error.errors) {\n      this.errorsPerInput.push(error.error.errors[key]);\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { AgentesComponent } from './agentes.component';\nimport { Routes, RouterModule } from '@angular/router';\nimport { NbCardModule, NbAlertModule } from '@nebular/theme';\nimport { NbEvaIconsModule } from '@nebular/eva-icons';\nimport { DataTableModule } from 'src/app/own/data-table/data-table.module';\n\n\nconst routes:Routes=[\n  {path:'',component:AgentesComponent}\n]\n\n\n@NgModule({\n  declarations: [AgentesComponent],\n  imports: [\n    CommonModule,\n    RouterModule.forChild(routes),\n    DataTableModule,\n    //Nebular's components\n    NbCardModule,\n    NbEvaIconsModule,\n    NbAlertModule,\n\n  ],\n  exports:[RouterModule]\n})\nexport class AgentesModule { }\n","import {Injectable} from '@angular/core';\nimport {Agente} from '../models/agente';\nimport {HttpClient} from '@angular/common/http';\nimport {Observable} from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AgentesService {\n\n  constructor(private http: HttpClient) {\n  }\n\n  public getAgentes(): Observable<Agente[]> {\n    return this.http.get<Agente[]>('http://api.vidamarinapuebla.com/api/agentes');\n  }\n\n  public updateAgente(agente: Agente): Observable<Agente> {\n    return this.http.put<Agente>('http://api.vidamarinapuebla.com/api/agentes/' + agente.id, agente);\n  }\n\n  public createAgente(agente: Agente): Observable<Agente> {\n    return this.http.post<Agente>('http://api.vidamarinapuebla.com/api/agentes', agente);\n  }\n\n  public deleteAgente(agente: Agente): Observable<Agente> {\n    return this.http.delete<Agente>('http://api.vidamarinapuebla.com/api/agentes/' + agente.id);\n  }\n}\n\n//ng build --prod --output-path docs --base-href /<project_name>/\n"],"sourceRoot":"webpack:///","file":"agentes-agentes-module-es5.js"}