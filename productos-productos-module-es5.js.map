{"version":3,"sources":["src/app/pages/productos/productos.component.html","src/app/pages/productos/productos.component.scss","src/app/pages/productos/productos.component.ts","src/app/pages/productos/productos.module.ts","src/app/services/productos.service.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<nb-alert status=\\\"success\\\" *ngIf=\\\"messageSuccess\\\" closable (close)=\\\"messageSuccess=''\\\">\\n    {{messageSuccess}}\\n</nb-alert>\\n<nb-alert status=\\\"danger\\\" *ngFor=\\\"let errorsInput of errorsPerInput; let i = index\\\" closable\\n    (close)=\\\"errorsPerInput.splice(i,1)\\\">\\n    <div *ngFor=\\\"let error of errorsInput\\\">\\n        - {{error}}\\n    </div>\\n</nb-alert>\\n\\n<nb-card>\\n    <nb-card-header>PRODUCTOS</nb-card-header>\\n    <nb-card-body>\\n        <app-data-table [dataArrayInput]=\\\"productos |async\\\" [tableStructure]=\\\"tableStructure\\\" #dataTable (create)=\\\"create($event,dataTable)\\\" (update)=\\\"update($event,dataTable)\\\" (delete)=\\\"delete($event,dataTable)\\\"></app-data-table>\\n    </nb-card-body>\\n</nb-card>\\n\"","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL3Byb2R1Y3Rvcy9wcm9kdWN0b3MuY29tcG9uZW50LnNjc3MifQ== */\"","import { Component, OnInit } from '@angular/core';\nimport { ProductosService } from '../../services/productos.service'\nimport { Producto } from 'src/app/models/producto';\nimport { TableStructure } from 'src/app/own/data-table/tableStructure';\nimport { Observable } from 'rxjs';\nimport { NbDialogService } from '@nebular/theme';\nimport { DialogComponent } from 'src/app/own/dialog/dialog.component';\n\n@Component({\n  selector: 'app-productos',\n  templateUrl: './productos.component.html',\n  styleUrls: ['./productos.component.scss']\n})\n\nexport class ProductosComponent implements OnInit {\n\n  public tableStructure:TableStructure={\n    columns:[\n      {title:'ID',name:'id',editable:false,type:\"number\",'filter':false},\n      {title:'Nombre',name:'nombre',editable:true,type:\"text\",'filter':true},\n      {title:'Código',name:'codigo_producto',editable:true,type:\"number\",'filter':true},\n      {title:'Marca',name:'marca',editable:true,type:\"text\",'filter':true},\n      {title:'Caducidad',name:'fecha_caducidad',editable:true,type:\"date\",'filter':true},\n      {title:'Ubicación',name:'ubicacion',editable:true,type:\"text\",'filter':true},\n      {title:'Medida',name:'unidad_medida',editable:true,type:\"text\",'filter':true},\n      {title:'Presentación',name:'presentacion',editable:true,type:\"text\",'filter':true},\n      {title:'Stock min',name:'stock_minimo',editable:true,type:\"number\",'filter':true},\n      {title:'Stock max',name:'stock_maximo',editable:true,type:\"number\",'filter':true},\n      {title:'Stock act',name:'stock_actual',editable:true,type:\"number\",'filter':true},\n      {title:'Costo',name:'costo',editable:true,type:\"number\",'filter':true},\n      {title:'Iva',name:'iva',editable:true,type:\"number\",'filter':true},\n      {title:'Precio',name:'precio',editable:true,type:\"number\",'filter':true},\n      {title:'Utilidad',name:'utilidad_bruta',editable:true,type:\"number\",'filter':true},\n      {title:'Descuento',name:'descuento',editable:true,type:\"number\",'filter':true},\n      {title:'Comisión',name:'comision',editable:true,type:\"number\",'filter':true},\n      {title:'Imagen',name:'imagen',editable:true,type:\"file\",'filter':false},\n      {title:'Descripción',name:'descripcion',editable:true,type:\"textarea\",'filter':true},\n\n    ],\n    buttons: {\n      create: true,\n      delete: true,\n      update: true\n    }\n  }\n  public productos : Observable<Producto[]>;\n  public errorsPerInput=[];\n  public messageSuccess=\"\";\n\n  constructor(private productoService: ProductosService,private dialogService: NbDialogService) { }\n\n  ngOnInit() {\n   this.productos=this.productoService.getProductos();\n  }\n  public create(newData,dataTable){\n    this.reset();\n    dataTable.charginData++;\n    this.productoService.createProducto(newData)\n      .subscribe(productoResponse=>{\n        dataTable.charginData--;\n        this.messageSuccess=\"Producto creado exitosamente\";\n        dataTable.pushData(productoResponse);\n      },error=>this.displayErrors(error,dataTable));\n  }\n  public update(updateData,dataTable){\n    this.reset();\n    dataTable.charginData++;\n    this.productoService.updateProducto(updateData)\n      .subscribe(productoResponse => {\n        dataTable.charginData--;\n        dataTable.updateData(productoResponse);\n        this.messageSuccess = \"Producto actualizado correctamente\";\n      }, error => this.displayErrors(error));\n  }\n  public delete(deleteData, dataTable) {\n    this.dialogService.open(DialogComponent, {\n      context: {\n        title: '¡Cuidado!',\n        content: `Si elimina este registro, se perderá el historial de movimientos relacionados al registro de ${(deleteData.codigo_producto+\"\").toUpperCase()}. ¿Desea continuar?`\n      },\n    }).onClose.subscribe(response => {\n      if (response) {\n        this.reset();\n        dataTable.charginData++;\n\n        this.productoService.deleteProducto(deleteData).subscribe(response => {\n          dataTable.charginData--;\n          this.messageSuccess = \"Producto eliminado correctamente\"\n          dataTable.deleteData(response);\n        }, error => this.displayErrors(error));\n      }\n    });\n  }\n\n  private reset() {\n    this.errorsPerInput = [];\n    this.messageSuccess = \"\";\n    setTimeout(() => {\n      this.errorsPerInput = [];\n      this.messageSuccess = \"\";\n    }, 10000);\n  }\n  private displayErrors(error,dataTable?) {\n    dataTable? dataTable.charginData--:0;\n    for (const key in error.error.errors) {\n      this.errorsPerInput.push(error.error.errors[key]);\n    }\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ProductosComponent } from './productos.component';\nimport { Routes, RouterModule } from '@angular/router';\nimport { NbCardModule, NbAlertModule  } from '@nebular/theme';\nimport { NbEvaIconsModule } from '@nebular/eva-icons';\nimport { DataTableModule } from 'src/app/own/data-table/data-table.module';\n\nconst routes: Routes = [\n  { path: '', component: ProductosComponent }\n]\n\n@NgModule({\n  declarations: [ProductosComponent],\n  imports: [\n    CommonModule,\n    RouterModule.forChild(routes),\n    DataTableModule,\n    //Nebular's components\n    NbCardModule,\n    NbEvaIconsModule,\n    NbAlertModule,\n\n  ],\n  exports: [RouterModule]\n})\nexport class ProductosModule { }\n","import {Injectable} from '@angular/core';\nimport {Producto} from '../models/producto';\nimport {HttpClient} from '@angular/common/http';\nimport {Observable} from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\n\nexport class ProductosService {\n\n  constructor(private http: HttpClient) {\n  }\n\n  public getProductos(): Observable<Producto[]> {\n    return this.http.get<Producto[]>('http://api.vidamarinapuebla.com/api/productos');\n  }\n\n  public updateProducto(producto: Producto): Observable<Producto> {\n    return this.http.put<Producto>('http://api.vidamarinapuebla.com/api/productos/' + producto.id, producto);\n  }\n\n  public createProducto(producto: Producto): Observable<Producto> {\n    return this.http.post<Producto>('http://api.vidamarinapuebla.com/api/productos', producto);\n  }\n\n  public deleteProducto(producto: Producto): Observable<Producto> {\n    return this.http.delete<Producto>('http://api.vidamarinapuebla.com/api/productos/' + producto.id);\n  }\n\n}\n"],"sourceRoot":"webpack:///","file":"productos-productos-module-es5.js"}