{"version":3,"sources":["./src/app/pages/productos/productos.component.html","./src/app/pages/productos/productos.component.scss","./src/app/pages/productos/productos.component.ts","./src/app/pages/productos/productos.module.ts","./src/app/services/productos.service.ts"],"names":[],"mappings":"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","file":"productos-productos-module-es2015.js","sourcesContent":["export default \"<nb-alert status=\\\"success\\\" *ngIf=\\\"messageSuccess\\\" closable (close)=\\\"messageSuccess=''\\\">\\n    {{messageSuccess}}\\n</nb-alert>\\n<nb-alert status=\\\"danger\\\" *ngFor=\\\"let errorsInput of errorsPerInput; let i = index\\\" closable\\n    (close)=\\\"errorsPerInput.splice(i,1)\\\">\\n    <div *ngFor=\\\"let error of errorsInput\\\">\\n        - {{error}}\\n    </div>\\n</nb-alert>\\n\\n<nb-card>\\n    <nb-card-header>PRODUCTOS</nb-card-header>\\n    <nb-card-body>\\n        <app-data-table [dataArrayInput]=\\\"productos |async\\\" [tableStructure]=\\\"tableStructure\\\" #dataTable (create)=\\\"create($event,dataTable)\\\" (update)=\\\"update($event,dataTable)\\\" (delete)=\\\"delete($event,dataTable)\\\"></app-data-table>\\n    </nb-card-body>\\n</nb-card>\\n\"","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL3Byb2R1Y3Rvcy9wcm9kdWN0b3MuY29tcG9uZW50LnNjc3MifQ== */\"","import { Component, OnInit } from '@angular/core';\nimport { ProductosService } from '../../services/productos.service'\nimport { Producto } from 'src/app/models/producto';\nimport { TableStructure } from 'src/app/own/data-table/tableStructure';\nimport { Observable } from 'rxjs';\nimport { NbDialogService } from '@nebular/theme';\nimport { DialogComponent } from 'src/app/own/dialog/dialog.component';\n\n@Component({\n  selector: 'app-productos',\n  templateUrl: './productos.component.html',\n  styleUrls: ['./productos.component.scss']\n})\n\nexport class ProductosComponent implements OnInit {\n\n  public tableStructure:TableStructure={\n    columns:[\n      {title:'ID',name:'id',editable:false,type:\"number\",'filter':false},\n      {title:'Nombre',name:'nombre',editable:true,type:\"text\",'filter':true},\n      {title:'Código',name:'codigo_producto',editable:true,type:\"number\",'filter':true},\n      {title:'Marca',name:'marca',editable:true,type:\"text\",'filter':true},\n      {title:'Caducidad',name:'fecha_caducidad',editable:true,type:\"date\",'filter':true},\n      {title:'Ubicación',name:'ubicacion',editable:true,type:\"text\",'filter':true},\n      {title:'Medida',name:'unidad_medida',editable:true,type:\"text\",'filter':true},\n      {title:'Presentación',name:'presentacion',editable:true,type:\"text\",'filter':true},\n      {title:'Stock min',name:'stock_minimo',editable:true,type:\"number\",'filter':true},\n      {title:'Stock max',name:'stock_maximo',editable:true,type:\"number\",'filter':true},\n      {title:'Stock act',name:'stock_actual',editable:true,type:\"number\",'filter':true},\n      {title:'Costo',name:'costo',editable:true,type:\"number\",'filter':true},\n      {title:'Iva',name:'iva',editable:true,type:\"number\",'filter':true},\n      {title:'Precio',name:'precio',editable:true,type:\"number\",'filter':true},\n      {title:'Utilidad',name:'utilidad_bruta',editable:true,type:\"number\",'filter':true},\n      {title:'Descuento',name:'descuento',editable:true,type:\"number\",'filter':true},\n      {title:'Comisión',name:'comision',editable:true,type:\"number\",'filter':true},\n      {title:'Imagen',name:'imagen',editable:true,type:\"file\",'filter':false},\n      {title:'Descripción',name:'descripcion',editable:true,type:\"textarea\",'filter':true},\n\n    ],\n    buttons: {\n      create: true,\n      delete: true,\n      update: true\n    }\n  }\n  public productos : Observable<Producto[]>;\n  public errorsPerInput=[];\n  public messageSuccess=\"\";\n\n  constructor(private productoService: ProductosService,private dialogService: NbDialogService) { }\n\n  ngOnInit() {\n   this.productos=this.productoService.getProductos();\n  }\n  public create(newData,dataTable){\n    this.reset();\n    dataTable.charginData++;\n    this.productoService.createProducto(newData)\n      .subscribe(productoResponse=>{\n        dataTable.charginData--;\n        this.messageSuccess=\"Producto creado exitosamente\";\n        dataTable.pushData(productoResponse);\n      },error=>this.displayErrors(error,dataTable));\n  }\n  public update(updateData,dataTable){\n    this.reset();\n    dataTable.charginData++;\n    this.productoService.updateProducto(updateData)\n      .subscribe(productoResponse => {\n        dataTable.charginData--;\n        dataTable.updateData(productoResponse);\n        this.messageSuccess = \"Producto actualizado correctamente\";\n      }, error => this.displayErrors(error));\n  }\n  public delete(deleteData, dataTable) {\n    this.dialogService.open(DialogComponent, {\n      context: {\n        title: '¡Cuidado!',\n        content: `Si elimina este registro, se perderá el historial de movimientos relacionados al registro de ${(deleteData.codigo_producto+\"\").toUpperCase()}. ¿Desea continuar?`\n      },\n    }).onClose.subscribe(response => {\n      if (response) {\n        this.reset();\n        dataTable.charginData++;\n\n        this.productoService.deleteProducto(deleteData).subscribe(response => {\n          dataTable.charginData--;\n          this.messageSuccess = \"Producto eliminado correctamente\"\n          dataTable.deleteData(response);\n        }, error => this.displayErrors(error));\n      }\n    });\n  }\n\n  private reset() {\n    this.errorsPerInput = [];\n    this.messageSuccess = \"\";\n    setTimeout(() => {\n      this.errorsPerInput = [];\n      this.messageSuccess = \"\";\n    }, 10000);\n  }\n  private displayErrors(error,dataTable?) {\n    dataTable? dataTable.charginData--:0;\n    for (const key in error.error.errors) {\n      this.errorsPerInput.push(error.error.errors[key]);\n    }\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ProductosComponent } from './productos.component';\nimport { Routes, RouterModule } from '@angular/router';\nimport { NbCardModule, NbAlertModule  } from '@nebular/theme';\nimport { NbEvaIconsModule } from '@nebular/eva-icons';\nimport { DataTableModule } from 'src/app/own/data-table/data-table.module';\n\nconst routes: Routes = [\n  { path: '', component: ProductosComponent }\n]\n\n@NgModule({\n  declarations: [ProductosComponent],\n  imports: [\n    CommonModule,\n    RouterModule.forChild(routes),\n    DataTableModule,\n    //Nebular's components\n    NbCardModule,\n    NbEvaIconsModule,\n    NbAlertModule,\n\n  ],\n  exports: [RouterModule]\n})\nexport class ProductosModule { }\n","import {Injectable} from '@angular/core';\nimport {Producto} from '../models/producto';\nimport {HttpClient} from '@angular/common/http';\nimport {Observable} from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\n\nexport class ProductosService {\n\n  constructor(private http: HttpClient) {\n  }\n\n  public getProductos(): Observable<Producto[]> {\n    return this.http.get<Producto[]>('http://api.vidamarinapuebla.com/api/productos');\n  }\n\n  public updateProducto(producto: Producto): Observable<Producto> {\n    return this.http.put<Producto>('http://api.vidamarinapuebla.com/api/productos/' + producto.id, producto);\n  }\n\n  public createProducto(producto: Producto): Observable<Producto> {\n    return this.http.post<Producto>('http://api.vidamarinapuebla.com/api/productos', producto);\n  }\n\n  public deleteProducto(producto: Producto): Observable<Producto> {\n    return this.http.delete<Producto>('http://api.vidamarinapuebla.com/api/productos/' + producto.id);\n  }\n\n}\n"],"sourceRoot":"webpack:///"}