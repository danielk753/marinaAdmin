{"version":3,"sources":["./src/app/pages/agentes/agentes.component.html","./src/app/pages/agentes/agentes.component.scss","./src/app/pages/agentes/agentes.component.ts","./src/app/pages/agentes/agentes.module.ts","./src/app/services/agentes.service.ts"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAe,qKAAsG,gBAAgB,wFAAwF,mIAAmI,OAAO,yY;;;;;;;;;;;;ACAvW;AAAe,6GAA8C,uJ;;;;;;;;;;;;;;;;;;;;ACAX;AAEgB;AAGE;AACnB;AAOjD,IAAa,gBAAgB,GAA7B,MAAa,gBAAgB;IAmB3B,YAAoB,aAA6B,EAAU,aAA8B;QAArE,kBAAa,GAAb,aAAa,CAAgB;QAAU,kBAAa,GAAb,aAAa,CAAiB;QAjBlF,mBAAc,GAAmB;YACtC,OAAO,EAAE,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,QAAQ,EAAE,KAAK,EAAE,IAAI,EAAE,QAAQ,EAAE,MAAM,EAAE,KAAK,EAAE;gBACrF,EAAE,KAAK,EAAE,QAAQ,EAAE,IAAI,EAAE,QAAQ,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE;gBAC/E,EAAE,KAAK,EAAE,UAAU,EAAE,IAAI,EAAE,UAAU,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,QAAQ,EAAE,MAAM,EAAE,IAAI,EAAE;gBACrF,EAAE,KAAK,EAAE,QAAQ,EAAE,IAAI,EAAE,QAAQ,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE;gBAC/E,EAAE,KAAK,EAAE,WAAW,EAAE,IAAI,EAAE,WAAW,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,UAAU,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE;YAC3F,OAAO,EAAE;gBACP,MAAM,EAAE,IAAI;gBACZ,MAAM,EAAE,IAAI;gBACZ,MAAM,EAAE,IAAI;aACb;SACF,CAAC;QAEK,mBAAc,GAAG,EAAE,CAAC;QACpB,mBAAc,GAAG,EAAE,CAAC;IAGkE,CAAC;IAE9F,QAAQ;QACN,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,aAAa,CAAC,UAAU,EAAE,CAAC;IACjD,CAAC;IAEM,MAAM,CAAC,OAAO,EAAE,SAAS;QAC9B,IAAI,CAAC,KAAK,EAAE,CAAC;QACT,SAAS,CAAC,WAAW,EAAE,CAAC;QAC5B,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,OAAO,CAAC;aACrC,SAAS,CAAC,cAAc,CAAC,EAAE;YAC1B,SAAS,CAAC,WAAW,EAAE,CAAC;YACxB,IAAI,CAAC,cAAc,GAAG,+BAA+B,CAAC;YACtD,SAAS,CAAC,QAAQ,CAAC,cAAc,CAAC;QACpC,CAAC,EAAE,KAAK,CAAC,EAAE,CAAC,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC,CAAC;IAC3C,CAAC;IAEM,MAAM,CAAC,UAAU,EAAE,SAAS;QACjC,IAAI,CAAC,KAAK,EAAE,CAAC;QACT,SAAS,CAAC,WAAW,EAAE,CAAC;QAC5B,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,UAAU,CAAC;aACxC,SAAS,CAAC,YAAY,CAAC,EAAE;YACxB,SAAS,CAAC,WAAW,EAAE,CAAC;YACxB,SAAS,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC;YACnC,IAAI,CAAC,cAAc,GAAG,qCAAqC,CAAC;QAC9D,CAAC,EAAE,KAAK,CAAC,EAAE,CAAC,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC,CAAC;IAC3C,CAAC;IAEM,MAAM,CAAC,UAAU,EAAE,SAAS;QACjC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,4EAAe,EAAE;YACvC,OAAO,EAAE;gBACP,KAAK,EAAE,WAAW;gBAClB,OAAO,EAAE,gGAAgG,UAAU,CAAC,MAAM,CAAC,WAAW,EAAE,qBAAqB;aAC9J;SACF,CAAC,CAAC,OAAO,CAAC,SAAS,CAAC,QAAQ,CAAC,EAAE;YAC9B,IAAI,QAAQ,EAAE;gBACZ,IAAI,CAAC,KAAK,EAAE,CAAC;gBACb,SAAS,CAAC,WAAW,EAAE,CAAC;gBACxB,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC,SAAS,CAAC,QAAQ,CAAC,EAAE;oBAC/D,SAAS,CAAC,WAAW,EAAE,CAAC;oBACxB,IAAI,CAAC,cAAc,GAAG,mCAAmC;oBACzD,SAAS,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC;gBACjC,CAAC,EAAC,KAAK,GAAE,KAAI,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC,CAAC;aACrC;QACH,CAAC,CAAC,CAAC;IAEL,CAAC;IACO,KAAK;QACX,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC;QACzB,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC;QAGzB,UAAU,CAAC,GAAG,EAAE;YACd,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC;YACzB,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC;QAE3B,CAAC,EAAE,KAAK,CAAC,CAAC;IACZ,CAAC;IACO,aAAa,CAAC,KAAK;QACzB,KAAK,MAAM,GAAG,IAAI,KAAK,CAAC,KAAK,CAAC,MAAM,EAAE;YACpC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC;SACnD;IACH,CAAC;CACF;;YA/DoC,+EAAc;YAAyB,8DAAe;;AAnB9E,gBAAgB;IAL5B,+DAAS,CAAC;QACT,QAAQ,EAAE,aAAa;QACvB,+NAAuC;;KAExC,CAAC;GACW,gBAAgB,CAkF5B;AAlF4B;;;;;;;;;;;;;;;;;;;;;;;;ACbY;AACM;AACQ;AACA;AACM;AACP;AACqB;AAG3E,MAAM,MAAM,GAAQ;IAClB,EAAC,IAAI,EAAC,EAAE,EAAC,SAAS,EAAC,mEAAgB,EAAC;CACrC;AAiBD,IAAa,aAAa,GAA1B,MAAa,aAAa;CAAI;AAAjB,aAAa;IAdzB,8DAAQ,CAAC;QACR,YAAY,EAAE,CAAC,mEAAgB,CAAC;QAChC,OAAO,EAAE;YACP,4DAAY;YACZ,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC;YAC7B,wFAAe;YACf,sBAAsB;YACtB,2DAAY;YACZ,mEAAgB;YAChB,4DAAa;SAEd;QACD,OAAO,EAAC,CAAC,4DAAY,CAAC;KACvB,CAAC;GACW,aAAa,CAAI;AAAJ;;;;;;;;;;;;;;;;;;;AC5Be;AAEO;AAMhD,IAAa,cAAc,GAA3B,MAAa,cAAc;IAEzB,YAAoB,IAAgB;QAAhB,SAAI,GAAJ,IAAI,CAAY;IACpC,CAAC;IAEM,UAAU;QACf,OAAO,IAAI,CAAC,IAAI,CAAC,GAAG,CAAW,6CAA6C,CAAC,CAAC;IAChF,CAAC;IAEM,YAAY,CAAC,MAAc;QAChC,OAAO,IAAI,CAAC,IAAI,CAAC,GAAG,CAAS,8CAA8C,GAAG,MAAM,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC;IACnG,CAAC;IAEM,YAAY,CAAC,MAAc;QAChC,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAS,6CAA6C,EAAE,MAAM,CAAC,CAAC;IACvF,CAAC;IAEM,YAAY,CAAC,MAAc;QAChC,OAAO,IAAI,CAAC,IAAI,CAAC,MAAM,CAAS,8CAA8C,GAAG,MAAM,CAAC,EAAE,CAAC,CAAC;IAC9F,CAAC;CACF;;YAlB2B,+DAAU;;AAFzB,cAAc;IAH1B,gEAAU,CAAC;QACV,UAAU,EAAE,MAAM;KACnB,CAAC;GACW,cAAc,CAoB1B;AApB0B;AAsB3B,iEAAiE","file":"agentes-agentes-module-es2015.js","sourcesContent":["export default \"<nb-alert status=\\\"success\\\" *ngIf=\\\"messageSuccess\\\" closable (close)=\\\"messageSuccess=''\\\">\\n    {{messageSuccess}}\\n</nb-alert>\\n\\n<nb-alert status=\\\"danger\\\" *ngFor=\\\"let errorsInput of errorsPerInput; let i = index\\\" closable\\n    (close)=\\\"errorsPerInput.splice(i,1)\\\">\\n    <div *ngFor=\\\"let error of errorsInput\\\">\\n        - {{error}}\\n    </div>\\n</nb-alert>\\n\\n<nb-card>\\n    <nb-card-header >PROVEEDORES</nb-card-header>\\n\\n    <nb-card-body>\\n\\n        <app-data-table [dataArrayInput]=\\\"agentes |async\\\" [tableStructure]=\\\"tableStructure\\\" #dataTable (create)=\\\"create($event,dataTable)\\\" (update)=\\\"update($event,dataTable)\\\" (delete)=\\\"delete($event,dataTable)\\\"></app-data-table>\\n    </nb-card-body>\\n\\n</nb-card>\\n\\n\"","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2FnZW50ZXMvYWdlbnRlcy5jb21wb25lbnQuc2NzcyJ9 */\"","import { Component, OnInit } from '@angular/core';\nimport { Agente } from 'src/app/models/agente';\nimport { AgentesService } from 'src/app/services/agentes.service';\nimport { TableStructure } from 'src/app/own/data-table/tableStructure';\nimport { Observable } from 'rxjs';\nimport { DialogComponent } from '../../own/dialog/dialog.component';\nimport { NbDialogService } from '@nebular/theme';\n\n@Component({\n  selector: 'app-agentes',\n  templateUrl: './agentes.component.html',\n  styleUrls: ['./agentes.component.scss']\n})\nexport class AgentesComponent implements OnInit {\n\n  public tableStructure: TableStructure = {\n    columns: [{ title: \"ID\", name: \"id\", editable: false, type: \"number\", filter: false },\n    { title: \"Nombre\", name: \"nombre\", editable: true, type: \"text\", filter: true },\n    { title: \"Teléfono\", name: \"telefono\", editable: true, type: \"number\", filter: true },\n    { title: \"Correo\", name: \"correo\", editable: true, type: \"text\", filter: true },\n    { title: \"Dirección\", name: \"direccion\", editable: true, type: \"textarea\", filter: true },],\n    buttons: {\n      create: true,\n      delete: true,\n      update: true\n    }\n  };\n  public agentes: Observable<Agente[]>;\n  public errorsPerInput = [];\n  public messageSuccess = \"\";\n\n\n  constructor(private agenteService: AgentesService, private dialogService: NbDialogService) { }\n\n  ngOnInit() {\n    this.agentes = this.agenteService.getAgentes();\n  }\n\n  public create(newData, dataTable) {\n    this.reset();\n        dataTable.charginData++;\n    this.agenteService.createAgente(newData)\n      .subscribe(agenteResponse => {\n        dataTable.charginData--;\n        this.messageSuccess = \"Proveedor creado exitosamente\";\n        dataTable.pushData(agenteResponse)\n      }, error => this.displayErrors(error));\n  }\n\n  public update(updateData, dataTable) {\n    this.reset();\n        dataTable.charginData++;\n    this.agenteService.updateAgente(updateData)\n      .subscribe(agenResponse => {\n        dataTable.charginData--;\n        dataTable.updateData(agenResponse);\n        this.messageSuccess = \"Proveedor actualizado correctamente\";\n      }, error => this.displayErrors(error));\n  }\n\n  public delete(deleteData, dataTable) {\n    this.dialogService.open(DialogComponent, {\n      context: {\n        title: '¡Cuidado!',\n        content: `Si elimina este registro, se perderá el historial de movimientos relacionados al registro de ${deleteData.nombre.toUpperCase()}. ¿Desea continuar?`\n      },\n    }).onClose.subscribe(response => {\n      if (response) {\n        this.reset();\n        dataTable.charginData++;\n        this.agenteService.deleteAgente(deleteData).subscribe(response => {\n          dataTable.charginData--;\n          this.messageSuccess = \"Proveedor eliminado correctamente\"\n          dataTable.deleteData(response);\n        },error=>this.displayErrors(error));\n      }\n    });\n\n  }\n  private reset() {\n    this.errorsPerInput = [];\n    this.messageSuccess = \"\";\n\n    \n    setTimeout(() => {\n      this.errorsPerInput = [];\n      this.messageSuccess = \"\";\n\n    }, 10000);\n  }\n  private displayErrors(error){\n    for (const key in error.error.errors) {\n      this.errorsPerInput.push(error.error.errors[key]);\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { AgentesComponent } from './agentes.component';\nimport { Routes, RouterModule } from '@angular/router';\nimport { NbCardModule, NbAlertModule } from '@nebular/theme';\nimport { NbEvaIconsModule } from '@nebular/eva-icons';\nimport { DataTableModule } from 'src/app/own/data-table/data-table.module';\n\n\nconst routes:Routes=[\n  {path:'',component:AgentesComponent}\n]\n\n\n@NgModule({\n  declarations: [AgentesComponent],\n  imports: [\n    CommonModule,\n    RouterModule.forChild(routes),\n    DataTableModule,\n    //Nebular's components\n    NbCardModule,\n    NbEvaIconsModule,\n    NbAlertModule,\n\n  ],\n  exports:[RouterModule]\n})\nexport class AgentesModule { }\n","import {Injectable} from '@angular/core';\nimport {Agente} from '../models/agente';\nimport {HttpClient} from '@angular/common/http';\nimport {Observable} from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AgentesService {\n\n  constructor(private http: HttpClient) {\n  }\n\n  public getAgentes(): Observable<Agente[]> {\n    return this.http.get<Agente[]>('http://api.vidamarinapuebla.com/api/agentes');\n  }\n\n  public updateAgente(agente: Agente): Observable<Agente> {\n    return this.http.put<Agente>('http://api.vidamarinapuebla.com/api/agentes/' + agente.id, agente);\n  }\n\n  public createAgente(agente: Agente): Observable<Agente> {\n    return this.http.post<Agente>('http://api.vidamarinapuebla.com/api/agentes', agente);\n  }\n\n  public deleteAgente(agente: Agente): Observable<Agente> {\n    return this.http.delete<Agente>('http://api.vidamarinapuebla.com/api/agentes/' + agente.id);\n  }\n}\n\n//ng build --prod --output-path docs --base-href /<project_name>/\n"],"sourceRoot":"webpack:///"}